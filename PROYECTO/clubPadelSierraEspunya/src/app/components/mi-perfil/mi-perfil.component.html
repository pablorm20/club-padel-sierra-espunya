<!-- VISTA DE LA PÁGINA MI PERFIL DE LA PÁGINA PRINCIPAL AL HABERSE LOGUEADO -->
<!-- MENÚ COMÚN DE LA PÁGINA PRINCIPAL CUANDO SE ESTÁ LOGUEADO-->
<app-menu-inicio-usuario></app-menu-inicio-usuario>
<div class="container">
    <div class="card">
        <!-- TÍTULO DE LA PÁGINA -->
        <div class="card-header header-forms">
            Mi perfil
        </div>
        <!-- FORMULARIO CON LOS CAMPOS DEL SOCIO LOGUEADO ACTUALMENTE. EL SOCIO SÓLO PUEDE ACTUALIZAR POR ÉL MISMO LA CONTRASEÑA Y LA FOTO DE PERFIL. -->
        <div class="card-body cuerpo-forms">
            <form ngNativeValidate [formGroup]="formularioSocio">

                <!-- PARTE DONDE SE PUEDE CAMBIAR LA FOTO DE PERFIL. CONTIENE LA IMAGEN ACTUAL Y UN BOTÓN QUE ABRE EL MODAL PARA EL CAMBIO DE FOTO -->
                <div class="form-group">
                    <div class="row">
                        <div *ngIf="this.imagenbase64" class="col-12"
                            style="display: flex; align-items: center; justify-content: center;">
                            <img [src]="this.imagenbase64" alt="" class="rounded" style="width: 20em;">
                        </div>
                        <div class="col-12" style="display: flex; align-items: center; justify-content: center;">
                            <button class="btn botones-texto-comunes" data-toggle="modal" data-target="#cambiarFotoPerfil">Cambiar
                                foto</button>
                        </div>
                    </div>
                </div>

                <!-- PARTE CON LOS DATOS DEL SOCIO -->
                <div class="form-group">
                    <div class="row">
                        <div class="col-6">
                            <label for="">Nombre:</label>
                            <input required type="text" class="form-control" formControlName="nombre"
                                placeholder="Escribe su nombre">
                        </div>
                        <div class="col-6">
                            <label for="">Apellidos:</label>
                            <input required type="text" class="form-control" formControlName="apellidos"
                                placeholder="Escribe sus apellidos">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-6">
                            <label for="">Dni:</label>
                            <input required type="text" class="form-control" formControlName="dni"
                                placeholder="Escribe su dni">
                        </div>
                        <div class="col-6">
                            <label for="">Correo:</label>
                            <input required type="email" class="form-control" formControlName="correo"
                                placeholder="Escribe su correo">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-6">
                            <label for="">Telefono:</label>
                            <input required type="number" class="form-control" formControlName="telefono"
                                placeholder="Escribe su teléfono">
                        </div>
                        <div class="col-6">
                            <label for="">Usuario:</label>
                            <input required type="text" class="form-control" formControlName="usuario"
                                placeholder="Escribe su usuario">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-6">
                            <label for="">Puntos premios:</label>
                            <input required type="number" class="form-control" formControlName="puntos_premios">
                        </div>
                        <div class="col-6">
                            <label for="">Puntos ranking:</label>
                            <input required type="number" class="form-control" formControlName="puntos_ranking">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-6">
                            <label for="">Torneos jugados:</label>
                            <input required type="number" class="form-control" formControlName="torneos_jugados">
                        </div>
                        <div class="col-6">
                            <label for="">Torneos ganados:</label>
                            <input required type="number" class="form-control" formControlName="torneos_ganados">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-6">
                            <label for="">Partidos jugados:</label>
                            <input required type="number" class="form-control" formControlName="partidos_jugados">
                        </div>
                        <div class="col-6">
                            <label for="">Partidos ganados:</label>
                            <input required type="number" class="form-control" formControlName="partidos_ganados">
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="col-6">
                            <label for="">Premios canjeados:</label>
                            <input required type="number" class="form-control" formControlName="premios_canjeados">
                        </div>
                        <div class="col-6">
                            <label>Género:</label>
                            <select class="form-control" formControlName="genero">
                                <option value="M">Masculino
                                </option>
                                <option value="F">Femenino
                                </option>
                            </select>
                        </div>
                    </div>
                </div>
                <!-- PARTE DONDE SE PUEDE CAMBIAR LA CONTRASEÑA. CONTIENE UN BOTÓN QUE ABRE EL MODAL PARA EL CAMBIO DE CONTRASEÑA -->
                <div class="form-group">
                    <div class="row">
                        <div class="col-12" style="display: flex; align-items: center; justify-content: center;">
                            <button class="btn botones-texto-comunes" data-toggle="modal"
                                data-target="#cambiarContrasenya">Cambiar
                                contraseña</button>
                        </div>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>
<!-- PIE DE PÁGINA COMÚN -->
<app-footer></app-footer>

<!-- MODAL PARA CAMBIAR LA FOTO DE PERFIL. SE ABRE CUANDO SE PULSA EL BOTÓN DE CAMBIO DE FOTO -->
<div class="modal" id="cambiarFotoPerfil">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- TÍTULO DEL MODAL -->
            <div class="modal-header">
                <h4>Editar foto {{this.formularioSocio.get('nombre')!.value}}</h4>
            </div>

            <!-- CUERPO DEL MODAL. DONDE TENEMOS EL BOTÓN PARA CARGAR UNA IMAGEN Y LA FOTO ACTUAL PARA QUE EL SOCIO LA VEA. -->
            <div class="modal-body">
                <div class="card">
                    <div class="card-body">
                        <div *ngIf="getImagenEditar()" class="col-12"
                            style="display: flex; align-items: center; justify-content: center;">
                            <img [src]="getImagenEditar()" alt="" class="rounded" style="width: 20em;">
                        </div>
                        <input class="form-control" type="file" accept="image/*" (change)="seleccionarArchivo($event)">
                    </div>
                </div>
            </div>

            <!-- PIE DEL MODAL. CON EL BOTÓN CERRAR Y EDITAR. EL BOTÓN EDITAR CAMBIA LA FOTO DEL PERFIL DEL SOCIO -->
            <div class="modal-footer">
                <button *ngIf="this.imagenbase64Editar" type="button" class="btn botones-texto-comunes" data-dismiss="modal"
                    (click)="cambiarFoto()">Editar</button>
                <button type="button" class="btn botones-texto-comunes" data-dismiss="modal">Cerrar</button>
            </div>

        </div>
    </div>
</div>

<!-- MODAL PARA CAMBIAR LA CONTRASEÑA. SE ABRE CUANDO SE PULSA EL BOTÓN DE CAMBIO DE CONTRASEÑA -->
<div class="modal" id="cambiarContrasenya">
    <div class="modal-dialog">
        <div class="modal-content">

            <!-- TÍTULO DEL MODAL -->
            <div class="modal-header">
                <h4>Cambiar contraseña</h4>
            </div>

            <!-- CUERPO DEL MODAL. DONDE TENEMOS UN FORMULARIO CON 3 CAMPOS. CONTRASEÑA ACTUAL, CONTRASEÑA NUEVA Y CONTRASEÑA NUEVA REPETIDA -->
            <div class="modal-body">
                <form ngNativeValidate [formGroup]="formularioCambioContrasenya">
                    <div class="form-group">
                        <div class="row">
                            <div class="col-12">
                                <label for="">Contraseña actual:</label>
                                <input required type="password" class="form-control" formControlName="contrasenyaActual"
                                    (input)="comprobarCambioValido()">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-12">
                                <label for="">Contraseña nueva:</label>
                                <input required type="password" class="form-control" formControlName="contrasenyaNueva"
                                    (input)="comprobarCambioValido()">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div class="row">
                            <div class="col-12">
                                <label for="">Contraseña nueva de nuevo:</label>
                                <input required type="password" class="form-control"
                                    formControlName="contrasenyaNuevaRepetida" (input)="comprobarCambioValido()">
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <div *ngIf="errores && errores.length > 0" class="col-12">
                            <label *ngFor="let error of errores">
                                <font color="white">{{error}}</font>
                            </label>
                        </div>
                    </div>
                </form>
            </div>

            <!-- PIE DEL MODAL. CON EL BOTÓN CERRAR Y CAMBIAR. EL BOTÓN CAMBIAR CAMBIA LA DEL SOCIO -->
            <div class="modal-footer">
                <button *ngIf="this.formularioCambioContrasenya.valid && comprobarCambioValido()" type="button"
                    class="btn botones-texto-comunes" (click)="cambiarContrasenya()">Cambiar</button>
                <button type="button" class="btn botones-texto-comunes" data-dismiss="modal">Cerrar</button>
            </div>

        </div>
    </div>
</div>